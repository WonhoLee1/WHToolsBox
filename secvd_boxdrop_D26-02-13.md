# Simulation Refinement Log: Box Drop with Flexible Body (2026-02-13)

## 1. 개요
오늘의 작업은 상자 낙하 시뮬레이션의 물리적 사실성을 극대화하기 위해 **유연체(Flexible Body) 모델링**을 도입하고, 이에 따른 **동적 분석 및 시각화 기능**을 고도화하는 데 초점을 맞추었습니다.

## 2. 주요 업데이트 사항

### A. 유연체(Flexible Body) 시스템 구현
- **3x3 분할 바디**: 상자 본체를 9개의 세그먼트 블록으로 나누어 독립적인 질량과 관성을 부여.
- **스프링 조인트 연결**: 각 세그먼트 사이를 Stiffness와 Damping이 적용된 2축 힌지 조인트로 연결하여 굽힘 변형(Bending) 모사.
- **통합 유연화**: 상자 본체뿐만 아니라 4개의 모서리 보호 패드(Edge Pads)까지 3분할하여 본체의 굴곡을 따라 함께 변형되도록 설계.

### B. 물리 파라미터 제어 및 UI 개선
- **실시간 강성 조절**: 전역 변수(`FLEX_STIFFNESS`, `FLEX_DAMPING`) 및 실행 시 사용자 입력을 통해 상자의 단단함을 자유롭게 조절 가능.
- **변수 주석 최적화**: `GAP_RATIO`, `PAD_XY`, `BOX_PAD_OFFSET`, `PLASTIC_DEFORMATION_RATIO` 등 주요 물리 변수에 대한 한글 주석 추가.

### C. 시각화 및 로고 디자인
- **SAMSUNG 브랜드 로고**: 상자 상단 중앙에 짙은 파란색 브랜드 플레이트와 "SAMSUNG" 텍스트 라벨 추가.
- **코너 패드 색상 반전**: 충격 레이어 파악을 위해 바깥쪽(초록) -> 중간(파랑) -> 안쪽(회색)으로 색상 순서 변경.
- **실시간 오버레이**: Passive Viewer에서 상자의 현재 **휨량(Flex)**과 **패드 압축량(Comp)**을 실시간 텍스트로 표시.

### D. 데이터 분석 고도화 (Matplotlib)
- **휨 변위(Deflection) 산출**: 조인트 각도와 세그먼트 길이를 이용해 실제 수직 휨량(mm)을 계산 및 그래프화.
- **전수 조인트 분석**: 16개 모든 유연 조인트의 회전 각도 실시간 기록 및 4x4 그리드 차트 생성.
- **패드 압축 분포**: 8개 코너별 평균/최대 압축량을 막대 그래프로 시각화하여 충격 집중도 파악.
- **멀티 윈도우 지원**: 모든 분석 그래프가 개별 창으로 한꺼번에 뜨도록 개선하여 데이터 비교 용이성 확보.

## 3. 시뮬레이션 설정 가이드
- `Enable Flexible Body`: `y` 입력 시 유연체 모드 활성화.
- `Stiffness (8000.0)`: 값이 클수록 상자가 단단해짐 (부드러운 상자: 500~2000).
- `Damping (200.0)`: 값이 클수록 충격 후 진동이 빠르게 감쇠됨.

## 4. 파일 정보
- **파일명**: `mujoco_secvd_boxmotionsim_v0_0_1.py`
- **로그 기록일**: 2026-02-13
